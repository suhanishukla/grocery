<!DOCTYPE html>
<!--
<html>
<body>

<h1>Grocery List</h1>
<table>
  <thead>
    <tr>
      <td>Category</td>
      <td>Name</td>
      <td>Price</td>
      <td>Rating</td>
    </tr>
  </thead>
  <tbody>
    {% for x in mygrocerylist %}
    <tr>
      <td>{{ x.type }}</td>
      <td>{{ x.name }}</td>
      <td>{{ x.price }}</td>
      <td>{{ x.rating }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</body>
</html>
-->

<html>
<head>
  <title>{% block title %}{% endblock %}</title>
  {% load bootstrap5 %}
  {% bootstrap_css %}
  {% bootstrap_javascript %}
  <style>
    .round-table {
      background: linear-gradient(180deg, rgb(140, 247, 194), #1aa943); /* Blue gradient background */
      border-radius: 15px; /* Adjust the border-radius as needed */
      overflow: hidden;
    }

    .round-table th,
    .round-table td {
      border: 1px solid #fff; /* White dividing rows and columns */
      padding: 10px; /* Adjust padding as needed */
      text-align: center;
    }
    .table-container {
      max-height: 80vh; /* Set a maximum height for the table container */
      overflow-y: auto; /* Enable vertical scrollbar */
    }

    .custom-padding {
      padding-top: 20px; /* Adjust the padding as needed */
    }

    .bottom-row {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: lightgray; /* Optional styling */
    }
  </style>
  <script>
    
    function calculateCost(){
      var table = document.getElementById('attributeTable');
      var rows = table.getElementsByTagName('tr');
      var sum = 0;

      for (var i = 1; i < rows.length; i++) { // Start from index 1 to skip header row
        var cells = rows[i].getElementsByTagName('td');

        for (var j = 2; j < cells.length; j++) { // Start from index 1 to skip first column
          var cellValue = parseFloat(cells[j].textContent.substring(1)) || 0; // Convert to integer, default to 0 if not a valid number
          sum += cellValue;
        }
      }

      var attributeRow = document.createElement('tr');
      var totalPrice = document.createElement('td');
      var realPrice = document.createElement('td');

      totalPrice.innerHTML = "Total Price"
      realPrice.innerHTML = "$"+sum.toFixed(2)

      attributeRow.appendChild(totalPrice);
      attributeRow.appendChild(realPrice);

      document.querySelector('#attributeTable tbody').appendChild(attributeRow);
      //alert(sum)
    }
    
    function displayType(){
      information = showAlert()

      name = information[0]
      price = information[1]

      var attributeRow = document.createElement('tr');
      var storeAttritubeElement = document.createElement('td');
      var itemAttritubeElement = document.createElement('td');
      var priceAttritubeElement = document.createElement('td');

      storeAttritubeElement.innerHTML = "Walmart"
      itemAttritubeElement.innerHTML = name
      priceAttritubeElement.innerHTML = "$"+price

      attributeRow.appendChild(storeAttritubeElement);
      attributeRow.appendChild(itemAttritubeElement);
      attributeRow.appendChild(priceAttritubeElement);

      document.querySelector('#attributeTable tbody').appendChild(attributeRow);
      calculateCost()
      //alert(type)
    }

    function showAlert() {
      var type = document.getElementById("type").innerHTML;
      var name = document.getElementById("name").innerHTML;
      var price = document.getElementById("price").innerHTML;
      price = price.substring(1);
      //alert(price)
      var table = document.getElementById('attributeTable')
      var lastRowIndex = table.rows.length - 1;
      table.deleteRow(lastRowIndex)
      return [name,price]
      //alert('Button Clicked!');
    }
    
  </script>
</head>

<body>

<div class="container">
  <ul class="nav bg-info">
    <li class="nav-item">
      <a class="nav-link link-light" href="/grocerylist">Shopping</a>
    </li>
    <li class="nav-item">
      <a class="nav-link link-light" href="/members">Recipes</a>
    </li>
  </ul>
  <form class="d-flex" role="search">
    <input class="form-control me-2" name="q" type="search" placeholder="Search" aria-label="Search">
    <button class="btn btn-outline-success" type="submit">Search</button>
  </form>

  {% block content %}
  {% endblock %}
  
</div>
<h1 class="custom-padding text-center">Grocery List</h1>

<div class="container-fluid">
  <div class="row">

    <!-- Left half of the page (col-md-6) -->
    <div class="col-md-6">
      <div class="table-container">
        <!-- Content for the left half goes here -->
        <h2 class="text-center">All Items</h2>
        <div class="d-flex flex-wrap">
          {% for item in mygrocerylist %}
          <div class="p-2 w-25 bd-highlight">
            <div class="card-body">
              <!-- <h5 class="card-title">Card title</h5> -->
              <p class="card-text">
                <p id="type">{{ item.type }}</p>
                <p id="name">{{ item.name }}</p>
                <p id="price">${{ item.price }}</p> <!-- yo add the dolla sign in later-->
              </p>
              </script>
              <button id="copyButton" onclick="displayType()" class="btn btn-primary">Add To Cart</button>
              
            </div>  
          </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Right half of the page (col-md-6) -->
    <div class="col-md-6">
      
      
      <!-- <button onclick=myFunction()>Click me</button> -->
      <!-- Content for the right half goes here -->
      <h2 class="text-center">Shopping Cart</h2>

        <table id="attributeTable" class="table round-table">
          <thead>
            <tr>
              <th scope="col">Store</th>
              <th scope="col">Item Name</th>
              <th scope="col">Price</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th colspan= "row"></th>
              <td colspan="1"></td>
              <td colspan="1"></td>
            </tr>
          </tbody>
        </table>
    </div>

  </div>
</div>
<!-- </div> -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
